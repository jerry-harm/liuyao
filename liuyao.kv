#主界面
#Copyright (C) 2026  jerry <jerry_harm@163.com>
#
#This program is free software: you can redistribute it and/or modify
#it under the terms of the GNU General Public License as published by
#the Free Software Foundation, either version 3 of the License, or
#(at your option) any later version.
#
#This program is distributed in the hope that it will be useful,
#but WITHOUT ANY WARRANTY; without even the implied warranty of
#MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#GNU General Public License for more details.
#
#You should have received a copy of the GNU General Public License
#along with this program.  If not, see <https://www.gnu.org/licenses/>.
#:import SixYaoWidget ui.sixyao.SixYaoWidget
#:import TimeWidget ui.time.TimeWidget
#:import SixGodWidget ui.time.SixGodWidget
#:import ChangeWidget ui.change.ChangeWidget
#:import Clipboard kivy.core.clipboard.Clipboard

Root:
   orientation: 'vertical'
   BoxLayout:
      orientation: 'horizontal'
      size_hint_y: 0.3
      TimeWidget:
         id:time
         on_sixgod_updated: sixgod.update(sixgod=args[1])
      Button:
         text: "导出到\n剪切板"
         size_hint: 0.1, 1
         on_press: Clipboard.copy(root.format_output(time.ids["time"].text,time.ids["empty"].text,original.gua,changed.gua,sixgod.sixgod,change.change))
      Button:
         text: "易经"
         size_hint: 0.1,1
         on_press: root.popup_zhouyi(text=original.gua.gua_ci() + '\n' + changed.gua.gua_ci() )
   BoxLayout:
      orientation: 'horizontal'
      SixGodWidget:
         id: sixgod
         size_hint_x: 0.1
      BoxLayout:
         orientation: 'horizontal'
         SixYaoWidget:
            id: original
            on_change: change.update(0,self.gua.卦象)
         ChangeWidget:
            id: change
            size_hint_x:0.1
         SixYaoWidget:
            id: changed
            on_change: change.update(1,self.gua.卦象)
